{
  "name": "WGS_create_20unrelated",
  "title": "WGS create 20 unrelated v25",
  "version": "v25",
  "uuid": "0c61d21e-003e-4845-ab57-932a307bf531",
  "project": "12a92962-8265-4fc0-b2f8-cf14f05db58b",
  "institution": "828cd4fe-ebb0-4b36-a94a-d2e3a36cc989",
  "previous_version": ["00e919c4-99f8-45a1-b9a8-da1d758ee515"],
  "version_upgrade_log": "new parallel ApplyBQSR",
  "input": [
    {
      "argument_name": "fastqs_R1",
      "argument_type": "file"
    },
    {
      "argument_name": "fastqs_R2",
      "argument_type": "file"
    },
    {
      "argument_name": "sample_names",
      "argument_type": "parameter"
    },
    {
      "argument_name": "rcktar_content_file_names",
      "argument_type": "parameter"
    },
    {
      "argument_name": "reference_bwa",
      "argument_type": "file",
      "files": [{"file": "e91a59c0-c546-4bea-a407-df6ab5552f13"}]
    },
    {
      "argument_name": "reference_fa",
      "argument_type": "file",
      "files": [{"file": "1936f246-22e1-45dc-bb5c-9cfd55537fe7"}]
    },
    {
      "argument_name": "known-sites-indels",
      "argument_type": "file",
      "files": [{"file": "55ac5044-f927-4df7-afa2-bf713764ee57"}]
    },
    {
      "argument_name": "known-sites-snp",
      "argument_type": "file",
      "files": [{"file": "8ed35691-0af4-467a-adbc-81eb088549f0"}]
    },
    {
      "argument_name": "regions",
      "argument_type": "file",
      "files": [{"file": "1c07a3aa-e2a3-498c-b838-15991c4a2f28"}]
    }
  ],
  "workflows": [
    {
      "name": "fastqc-r1",
      "workflow": "49e96b51-ed6c-4418-a693-d0e9f79adfa5",
      "config": {
        "instance_type": "t3.small",
        "ebs_size": "1.1x",
        "EBS_optimized": true,
        "spot_instance": false,
        "run_name": "run_fastqc-r1",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "input": [
        {
          "argument_name": "input_fastq",
          "argument_type": "file",
          "scatter": 2,
          "source_argument_name": "fastqs_R1"
        }
      ]
    },
    {
      "name": "fastqc-r2",
      "workflow": "49e96b51-ed6c-4418-a693-d0e9f79adfa5",
      "config": {
        "instance_type": "t3.small",
        "ebs_size": "1.1x",
        "EBS_optimized": true,
        "spot_instance": false,
        "run_name": "run_fastqc-r2",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "input": [
        {
          "argument_name": "input_fastq",
          "argument_type": "file",
          "scatter": 2,
          "source_argument_name": "fastqs_R2"
        }
      ]
    },
    {
      "name": "workflow_bwa-mem_no_unzip-check",
      "workflow": "aa490a0f-e6a7-4b97-9c91-4e15b5896423",
      "config": {
        "instance_type": "c5n.18xlarge",
        "ebs_size": "6.3x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_workflow_bwa-mem_no_unzip-check",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "custom_pf_fields": {
          "raw_bam": {
              "file_type": "intermediate file",
              "description": "Intermediate alignment file"
          }
      },
      "input": [
        {
          "argument_name": "fastq_R1",
          "argument_type": "file",
          "scatter": 2,
          "source_argument_name": "fastqs_R1"
        },
        {
          "argument_name": "fastq_R2",
          "argument_type": "file",
          "scatter": 2,
          "source_argument_name": "fastqs_R2"
        },
        {
          "argument_name": "reference",
          "argument_type": "file",
          "source_argument_name": "reference_bwa"
        }
      ]
    },
    {
      "name": "cgap-bamqc",
      "workflow": "9ff0c046-9352-4ec4-9a34-bf3f547bde61",
      "config": {
        "instance_type": "r4.2xlarge",
        "ebs_size": "3.5x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_bamqc",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_bwa-mem_no_unzip-check",
          "source_argument_name": "raw_bam"
        },
        {
          "argument_name": "sample",
          "argument_type": "parameter",
          "source_argument_name": "sample_names",
          "scatter": 1
        }
      ]
    },
    {
      "name": "workflow_add-readgroups-check",
      "workflow": "d554d59b-e709-4c35-a81f-68a0cb3dd38a",
      "config": {
        "instance_type": "c5.2xlarge",
        "ebs_size": "3.5x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_workflow_add-readgroups-check",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "custom_pf_fields": {
          "bam_w_readgroups": {
              "file_type": "intermediate file",
              "description": "Intermediate alignment file"
          }
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_bwa-mem_no_unzip-check",
          "source_argument_name": "raw_bam"
        },
        {
          "argument_name": "sample_name",
          "argument_type": "parameter",
          "source_argument_name": "sample_names",
          "scatter": 1
        }
      ]
    },
    {
      "name": "cgap-bamqc-1",
      "workflow": "9ff0c046-9352-4ec4-9a34-bf3f547bde61",
      "config": {
        "instance_type": "r4.2xlarge",
        "ebs_size": "3.5x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_bamqc",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_add-readgroups-check",
          "source_argument_name": "bam_w_readgroups"
        },
        {
          "argument_name": "sample",
          "argument_type": "parameter",
          "source_argument_name": "sample_names",
          "scatter": 1
        }
      ]
    },
    {
      "name": "workflow_merge-bam-check",
      "workflow": "4853a03a-8c0c-4624-a45d-c5206a72907b",
      "config": {
        "instance_type": "c5.2xlarge",
        "ebs_size": "3x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_workflow_merge-bam-check",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "custom_pf_fields": {
          "merged_bam": {
              "file_type": "intermediate file",
              "description": "Intermediate alignment file"
          }
      },
      "input": [
        {
          "argument_name": "input_bams",
          "argument_type": "file",
          "gather": 1,
          "source": "workflow_add-readgroups-check",
          "source_argument_name": "bam_w_readgroups"
        }
      ]
    },
    {
      "name": "cgap-bamqc-2",
      "workflow": "9ff0c046-9352-4ec4-9a34-bf3f547bde61",
      "config": {
        "instance_type": "r4.2xlarge",
        "ebs_size": "3.5x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_bamqc",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_merge-bam-check",
          "source_argument_name": "merged_bam"
        },
        {
          "argument_name": "sample",
          "argument_type": "parameter",
          "source_argument_name": "sample_names",
          "scatter": 1
        }
      ]
    },
    {
      "name": "workflow_picard-MarkDuplicates-check",
      "workflow": "beb2b340-94ee-4afe-b4e3-66caaf063397",
      "config": {
        "instance_type": "c5n.18xlarge",
        "ebs_size": "3x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_workflow_picard-MarkDuplicates-check",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "custom_pf_fields": {
          "dupmarked_bam": {
              "file_type": "intermediate file",
              "description": "Intermediate alignment file"
          }
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_merge-bam-check",
          "source_argument_name": "merged_bam"
        }
      ]
    },
    {
      "name": "cgap-bamqc-3",
      "workflow": "9ff0c046-9352-4ec4-9a34-bf3f547bde61",
      "config": {
        "instance_type": "r4.2xlarge",
        "ebs_size": "3.5x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_bamqc",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_picard-MarkDuplicates-check",
          "source_argument_name": "dupmarked_bam"
        },
        {
          "argument_name": "sample",
          "argument_type": "parameter",
          "source_argument_name": "sample_names",
          "scatter": 1
        }
      ]
    },
    {
      "name": "workflow_sort-bam-check",
      "workflow": "560f5194-cd3a-4799-9b1a-6a2d2c371c89",
      "config": {
        "instance_type": "m5a.2xlarge",
        "ebs_size": "3.2x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_workflow_sort-bam-check",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "custom_pf_fields": {
          "sorted_bam": {
              "file_type": "intermediate file",
              "description": "Intermediate alignment file"
          }
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_picard-MarkDuplicates-check",
          "source_argument_name": "dupmarked_bam"
        }
      ]
    },
    {
      "name": "cgap-bamqc-4",
      "workflow": "9ff0c046-9352-4ec4-9a34-bf3f547bde61",
      "config": {
        "instance_type": "r4.2xlarge",
        "ebs_size": "3.5x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_bamqc",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_sort-bam-check",
          "source_argument_name": "sorted_bam"
        },
        {
          "argument_name": "sample",
          "argument_type": "parameter",
          "source_argument_name": "sample_names",
          "scatter": 1
        }
      ]
    },
    {
      "name": "workflow_gatk-BaseRecalibrator",
      "workflow": "455b3056-64ca-4a9b-b546-294b01c9ca92",
      "config": {
        "instance_type": "t3.small",
        "ebs_size": "2x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_workflow_gatk-BaseRecalibrator",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "custom_pf_fields": {
          "recalibration_report": {
              "file_type": "intermediate file",
              "description": "Intermediate report file"
          }
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_sort-bam-check",
          "source_argument_name": "sorted_bam"
        },
        {
          "argument_name": "reference",
          "argument_type": "file",
          "source_argument_name": "reference_fa"
        },
        {
          "argument_name": "known-sites-indels",
          "argument_type": "file"
        },
        {
          "argument_name": "known-sites-snp",
          "argument_type": "file"
        }
      ]
    },
    {
      "name": "workflow_gatk-ApplyBQSR-check",
      "workflow": "c4d9ce59-7ff3-44c8-8336-f46774a4d882",
      "config": {
        "instance_type": "c5n.9xlarge",
        "ebs_size": "5.5x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_workflow_gatk-ApplyBQSR-check",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "custom_pf_fields": {
          "recalibrated_bam": {
              "file_type": "alignments",
              "description": "processed output from cgap upstream pipeline"
          }
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_sort-bam-check",
          "source_argument_name": "sorted_bam"
        },
        {
          "argument_name": "recalibration_report",
          "argument_type": "file",
          "source": "workflow_gatk-BaseRecalibrator",
          "source_argument_name": "recalibration_report"
        },
        {
          "argument_name": "reference",
          "argument_type": "file",
          "source_argument_name": "reference_fa"
        },
        {
          "argument_name": "nthreads",
          "argument_type": "parameter",
          "value": "28",
          "value_type": "integer"
        }
      ]
    },
    {
      "name": "cgap-bamqc-5",
      "workflow": "9ff0c046-9352-4ec4-9a34-bf3f547bde61",
      "config": {
        "instance_type": "r4.2xlarge",
        "ebs_size": "3.5x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_bamqc",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_gatk-ApplyBQSR-check",
          "source_argument_name": "recalibrated_bam"
        },
        {
          "argument_name": "sample",
          "argument_type": "parameter",
          "source_argument_name": "sample_names",
          "scatter": 1
        }
      ]
    },
    {
      "name": "workflow_granite-mpileupCounts",
      "workflow": "620671e7-b21a-4c48-aa90-b5beb3283d64",
      "config": {
        "instance_type": "c5.4xlarge",
        "ebs_size": "4x",
        "EBS_optimized": true,
        "spot_instance": false,
        "run_name": "run_workflow_granite-mpileupCounts",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "custom_pf_fields": {
          "rck": {
              "file_type": "read counts (rck)",
              "description": "read counts (rck) file"
          }
      },
      "input": [
        {
          "argument_name": "input_bam",
          "argument_type": "file",
          "source": "workflow_gatk-ApplyBQSR-check",
          "source_argument_name": "recalibrated_bam"
        },
        {
          "argument_name": "reference",
          "argument_type": "file",
          "source_argument_name": "reference_fa"
        },
        {
          "argument_name": "regions",
          "argument_type": "file"
        },
        {
          "argument_name": "nthreads",
          "argument_type": "parameter",
          "value": "15",
          "value_type": "integer"
        }
      ]
    },
    {
      "name": "workflow_granite-rckTar",
      "workflow": "43200ef2-a5da-4216-a736-4d4eac4449d0",
      "config": {
        "instance_type": "c5.xlarge",
        "ebs_size": "2.5x",
        "EBS_optimized": true,
        "spot_instance": true,
        "run_name": "run_workflow_granite-rckTar",
        "behavior_on_capacity_limit": "wait_and_retry"
      },
      "custom_pf_fields": {
          "rck_tar": {
              "file_type": "tarred read counts (rck)",
              "description": "tarred read counts (rck) file"
          }
      },
      "input": [
        {
          "argument_name": "input_rcks",
          "argument_type": "file",
          "gather": 1,
          "rename": "formula:rcktar_content_file_names",
          "source": "workflow_granite-mpileupCounts",
          "source_argument_name": "rck"
        }
      ]
    }
  ]
}
